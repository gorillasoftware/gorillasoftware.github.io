(function(){$(document).ready(function(){var t,e,r,n,i,a,s,o,l,c,u,h,f,p,d,g,m,v,y,b,x,w,_,k,C,T,E,P,A,N,M,S,B,j,q,R,z,O,F,L,I,W,D,H,G;for(f=80,A=$("#paper").width(),o=$("#paper").height(),M=A/2,B=o/2,a=7,g={},v=[],_=[],E=[],$("#paper").mousemove(function(t){var e,r,a,s,o,l,c,u,h,p,d,m,y,b,x,w,k,C,T,P,A,N,S;for(m=t.pageX-M-$("#paper").offset().left,y=t.pageY-B-$("#paper").offset().top,i.attr({fill:"none",stroke:"black"}),P=to_uvw(f,m,y),a=P[0],l=P[1],h=P[2],s=v[a],null!=s&&s.attr({fill:"darkred"}),c=_[l],null!=c&&c.attr({fill:"darkblue"}),p=E[h],null!=p&&p.attr({fill:"darkgreen"}),r=((g[a]||{})[l]||{})[h],A=[-1,0,1],b=0,k=A.length;k>b;b++)for(o=A[b],N=[-1,0,1],x=0,C=N.length;C>x;x++)for(u=N[x],S=[-1,0,1],w=0,T=S.length;T>w;w++)d=S[w],e=((g[a+o]||{})[l+u]||{})[h+d],null!=e&&(e.attr({fill:"blue"}),e.toFront);return null!=r&&(r.attr({fill:"red"}),r.toFront()),n.toFront(),$("#xy").html(""+m+", "+y),$("#uvw").html(""+a+" , "+l+", "+h)}),c=Raphael("paper","100%","100%"),h=Math.sqrt(3)*f/6,t=Math.sqrt(3)*f/3,s=Math.sqrt(3)*f/2,p=0,C=0,n=c.set(),i=c.set(),w=z=-a;a>=z?a>=w:w>=a;a>=z?w++:w--)for(T=O=-a;a>=O?a>=T:T>=a;a>=O?T++:T--)for(F=[1-w-T,-w-T],q=0,R=F.length;R>q;q++)m=F[q],p++,C++,L=to_xy(f,m,w,T),N=L[0],S=L[1],N+=M,S+=B,r=c.circle(N,S,1),r.attr({fill:"red",stroke:"none"}),b=(m+w+T)%2===0,b?(u=["M",N,S-t,"L",N+f/2,S+h,"L",N-f/2,S+h,"Z"],e=Math.round(N)+"/"+Math.round(S+w*h)):(u=["M",N,S+t,"L",N+f/2,S-h,"L",N-f/2,S-h,"Z"],e=Math.round(N)+"/"+Math.round(S+w*h+h)),y=null!=(I=v[m])?I:v[m]=c.set(),k=null!=(W=_[w])?W:_[w]=c.set(),P=null!=(D=E[T])?D:E[T]=c.set(),d=c.path(u),null!=(H=g[m])||(g[m]={}),null!=(G=(j=g[m])[w])||(j[w]={}),g[m][w][T]=d,y.push(d),k.push(d),P.push(d),i.push(d),l=b?f/6:-f/6,x=c.text(N,S+l,""+m+"/"+w+"/"+T),n.push(x),x.attr({fill:"white","font-size":f/6,"text-anchor":"middle"});return i.attr({"stroke-width":1}),i.toBack})}).call(this);